<?xml version="1.0" encoding="utf-8"?>
<project name="MobileSlider" default="deploy" basedir="C:\Projects\GitHub\MobileSlider\test">
  <description>Ant buildfile for web UI deployment. Generated by the Mendix Business Modeler.</description>
  <taskdef name="gzipall" classname="com.mendix.ant.GZipAll" />
  <property name="theme" location="theme" />
  <property name="deployment" location="deployment" />
  <property name="web" location="${deployment}/web" />
  <property name="tmp" location="${deployment}/tmp" />
  <target name="clean" description="clean the deployment directory">
    <delete dir="${web}" />
  </target>
  <target name="deploy" description="deploy the project">
    <delete dir="${web}/forms" />
    <unzip src="C:\Projects\GitHub\MobileSlider\test\widgets\MendixAppCloudNavigation.mpk" dest="${web}/widgets" />
    <unzip src="C:\Projects\GitHub\MobileSlider\test\widgets\GreenSock.mpk" dest="${web}/widgets" />
    <unzip src="C:\Projects\GitHub\MobileSlider\test\widgets\MobileSliderBackground.mpk" dest="${web}/widgets" />
    <unzip src="C:\Projects\GitHub\MobileSlider\test\widgets\SprintrFeedbackWidget.mpk" dest="${web}/widgets" />
    <unzip src="C:\Projects\GitHub\MobileSlider\test\widgets\MobileSlider.mpk" dest="${web}/widgets" />
    <copy todir="${web}" overwrite="true">
      <fileset dir="${theme}">
        <exclude name="*.zip" />
      </fileset>
    </copy>
  </target>
  <target name="gzip" description="gzip theme and widget files">
    <gzip src="${web}/widgets/widgets.js" destfile="${web}/widgets/widgets.js.gz" />
    <gzip src="${web}/widgets/widgets.css" destfile="${web}/widgets/widgets.css.gz" />
    <mkdir dir="${tmp}" />
    <copy todir="${tmp}" overwrite="true">
      <fileset dir="${theme}">
        <exclude name="*.zip" />
      </fileset>
    </copy>
    <gzipall>
      <fileset dir="${tmp}">
        <include name="**/*.css" />
        <include name="**/*.html" />
        <include name="**/*.js" />
      </fileset>
      <fileset dir="${web}">
        <include name="**/*.layout.xml" />
        <include name="**/*.page.xml" />
      </fileset>
    </gzipall>
    <copy todir="${web}" overwrite="true">
      <fileset dir="${tmp}" />
    </copy>
    <delete dir="${tmp}" />
  </target>
</project>